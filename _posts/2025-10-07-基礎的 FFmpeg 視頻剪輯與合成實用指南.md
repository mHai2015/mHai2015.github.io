---
layout: post
title:  "基礎FFmpeg視頻剪輯與合成實用指南"
date:   2025-09-12 15:50:56 +0800
categories: [ffmpeg]
---



1、 提取片段（剪掉不需要的部分）

ffmpeg -i input.mp4 -ss 00:01:00 -to 00:02:30 -c copy output.mp4
✅ -ss 是起始時間，-to 是結束時間。
✅ -c copy 表示直接複製，不重新壓縮（速度快，無損）。

從某時間開始提取到結尾

ffmpeg -i input.mp4 -ss 00:01:20 -c copy output.mp4


按幀提取（例如每秒一幀）
ffmpeg -i input.mp4 -vf fps=1 frames/frame_%04d.png
提取 所有幀：
ffmpeg -i input.mp4 frames/frame_%06d.png

將多個片段連接成一個（同編碼）
先建一個文本檔：
# filelist.txt
file 'part1.mp4'
file 'part2.mp4'
file 'part3.mp4'
ffmpeg -f concat -safe 0 -i filelist.txt -c copy output.mp4
✅ 所有文件必須是相同的編碼格式（如 H.264）。
若格式不同（需重新編碼）
ffmpeg -f concat -safe 0 -i filelist.txt -c:v libx264 -c:a aac -b:a 192k output.mp4

# 畫面合成與拼圖
將兩段視頻左右拼接
ffmpeg -i left.mp4 -i right.mp4 -filter_complex "hstack" output.mp4
上下拼接：
ffmpeg -i top.mp4 -i bottom.mp4 -filter_complex "vstack" output.mp4
Picture-in-Picture（小畫面疊加）
ffmpeg -i background.mp4 -i overlay.mp4 -filter_complex "overlay=10:10" output.mp4
將第二個視頻疊加在主畫面左上角（距左10px，上10px）

# 音頻處理
提取音頻
ffmpeg -i input.mp4 -q:a 0 -map a audio.mp3
將音頻合入視頻
ffmpeg -i video.mp4 -i audio.mp3 -c:v copy -c:a aac -shortest output.mp4
# 圖片合成為視頻
由連續圖片生成視頻（30fps）
ffmpeg -framerate 30 -i frames/frame_%04d.png -c:v libx264 -pix_fmt yuv420p output.mp4
若要指定分辨率
ffmpeg -framerate 30 -i frames/frame_%04d.png -s 1920x1080 -c:v libx264 output.mp4
調整視頻屬性
改變分辨率
ffmpeg -i input.mp4 -vf scale=1280:720 output.mp4
調整播放速度
加快 2 倍：
ffmpeg -i input.mp4 -filter:v "setpts=0.5*PTS" output.mp4
放慢 2 倍：
ffmpeg -i input.mp4 -filter:v "setpts=2.0*PTS" output.mp4
去聲音或只要聲音
去掉音軌：
ffmpeg -i input.mp4 -an output.mp4
只保留音軌：
ffmpeg -i input.mp4 -vn output.mp3


需求	命令特點
剪輯 / 提取片段	-ss + -to + -c copy
圖片→視頻	-framerate + -i frame_%04d.png
拼接片段	concat 模式
疊加視頻 / 圖片	overlay
無損快速處理	-c copy
AI升級後重建視頻	ffmpeg -framerate ... -i upscale/frame_%06d.png -c:v libx264 output.mp4
# ğŸ¬ FFmpeg è§†é¢‘å‰ªè¾‘ä¸åˆæˆç®€æ˜æŒ‡å—

## ğŸªš ä¸€ã€åŸºæœ¬æ¦‚å¿µ
FFmpeg æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡ï¼š
```bash
ffmpeg -i input.mp4 [å‚æ•°] output.mp4
```
è¿›è¡Œè½¬ç ã€å‰ªè¾‘ã€æ‹¼æ¥ã€æå–éŸ³é¢‘/å›¾ç‰‡ç­‰æ“ä½œã€‚  
åªè¦æŒæ¡å‡ ä¸ªæ ¸å¿ƒå‘½ä»¤ï¼Œå°±èƒ½å®Œæˆå¤§éƒ¨åˆ†å·¥ä½œã€‚

---

## âœ‚ï¸ äºŒã€å¸¸è§å‰ªè¾‘å‘½ä»¤

### 1ï¸âƒ£ æå–ç‰‡æ®µï¼ˆå‰ªæ‰ä¸éœ€è¦çš„éƒ¨åˆ†ï¼‰
```bash
ffmpeg -ss 00:01:00 -to 00:02:30 -i input.mp4 -c copy output.mp4
```
> âœ… `-ss` æ˜¯èµ·å§‹æ—¶é—´ï¼Œ`-to` æ˜¯ç»“æŸæ—¶é—´ã€‚  
> âœ… `-c copy` è¡¨ç¤ºç›´æ¥å¤åˆ¶ï¼Œä¸é‡æ–°å‹ç¼©ï¼ˆé€Ÿåº¦å¿«ï¼Œç”»è´¨æ— æŸï¼‰ã€‚

### 2ï¸âƒ£ ä»æŸæ—¶é—´å¼€å§‹æå–åˆ°ç»“å°¾
```bash
ffmpeg -ss 00:05:00 -i input.mp4 -c copy output.mp4
```

### 3ï¸âƒ£ æŒ‰å¸§æå–ï¼ˆä¾‹å¦‚æ¯ç§’ä¸€å¸§ï¼‰
```bash
ffmpeg -i input.mp4 -vf fps=1 frames/frame_%04d.png
```
> æ¯ç§’ä¿å­˜ä¸€å¸§å›¾ç‰‡åˆ° `frames` æ–‡ä»¶å¤¹ä¸­ã€‚

æå– **æ‰€æœ‰å¸§**ï¼š
```bash
ffmpeg -i input.mp4 frames/frame_%06d.png
```

### 4ï¸âƒ£ æå–æŒ‡å®šæ™‚é–“æ®µçš„æ¯ä¸€å¹€
```bash
ffmpeg -ss 00:01:30 -to 00:02:30 -i input.mp4 -qscale:v 1 frames/frame_%04d.jpg
```
> âœ… `-qscale:v 1` åœ–ç‰‡å“è³ªï¼ˆ1=æœ€å¥½ï¼Œ31=æœ€å·®ï¼Œå»ºè­° 2~3ï¼‰ã€‚  
> âœ… `frames/frame_%04d.jpg` è¼¸å‡ºæª”åæ ¼å¼ï¼Œä¾‹å¦‚ frame_0001.jpgã€frame_0002.jpg â€¦

âš™ï¸ æ•ˆæœï¼šæœƒå¾ 00:01:30 åˆ° 00:02:30 ä¹‹é–“æå–æ¯ä¸€å¹€å½±åƒï¼Œå…¨éƒ¨è¼¸å‡ºç‚ºé€£çºŒåœ–ç‰‡ã€‚

---

## ğŸ§© ä¸‰ã€è§†é¢‘åˆæˆä¸æ‹¼æ¥

### 1ï¸âƒ£ åˆä½µè²éŸ³èˆ‡ç„¡è²å½±ç‰‡ä¸¦æ·»åŠ å°é¢
```bash
ffmpeg -i input.mp4 -i input.m4a -i cover.jpg -map 0:v -map 1:a -map 2 -c:v copy -c:a aac -disposition:v:1 attached_pic output.mp4
```
> âš  æ³¨æ„å½±ç‰‡èˆ‡éŸ³è¨Šé•·åº¦éœ€è¦ä¸€è‡´ã€‚

**ğŸ‘‰ çµæœï¼š**
- åŸä¾†çš„ç•«é¢ï¼ˆinput.mp4ï¼‰
- éŸ³è¨Šï¼ˆinput.m4aï¼‰
- å°é¢ï¼ˆcover.jpgï¼‰
- æ’­æ”¾æ™‚ã€æ–‡ä»¶å±¬æ€§ä¸­éƒ½å¯è¦‹ã€‚
- ç”Ÿæˆçš„ `output.mp4` å³ç‚ºå¸¶æœ‰å°é¢çš„å½±ç‰‡ã€‚

### 2ï¸âƒ£ å°‡å°é¢ç–ŠåŠ åˆ°å½±ç‰‡å‰
#### å°‡éŸ³è¦–é »åˆå¹¶ä¸¦æ·»åŠ å°é¢ï¼Œè¦–é »é–‹å§‹å‰é¡¯ç¤ºå°é¢ï¼š
```bash
ffmpeg -loop 1 -t 5 -i cover.jpg -i video.mp4 -i audio.m4a \
-filter_complex "[2:a]adelay=5000|5000[aud]; \
[0:v][1:v]concat=n=2:v=1:a=0[v]" \
-map "[v]" -map "[aud]" -shortest -y output.mp4
```
> âš  æ³¨æ„å½±ç‰‡èˆ‡éŸ³è¨Šé•·åº¦éœ€è¦ä¸€è‡´ã€‚

**åƒæ•¸èªªæ˜ï¼š**
- `-loop 1 -t 5 -i cover.jpg`ï¼šå°é¢åœ–ç‰‡é¡¯ç¤º 5 ç§’ã€‚
- `[2:a]adelay=5000|5000[aud]`ï¼šå»¶é²éŸ³é » 5 ç§’ï¼ˆå–®ä½æ¯«ç§’ï¼‰ã€‚
- `[0:v][1:v]concat=n=2:v=1:a=0[v]`ï¼šæŠŠå°é¢èˆ‡å½±ç‰‡ç•«é¢æ‹¼æ¥ã€‚
- `-shortest`ï¼šä»¥æœ€çŸ­æµé•·åº¦è¼¸å‡ºï¼ˆé¿å…ç„¡è²å°¾å·´ï¼‰ã€‚

**ğŸ‘‰ çµæœï¼š**
- çµæœï¼šå°é¢éœæ­¢é¡¯ç¤º 5 ç§’å¾Œï¼Œå½±ç‰‡èˆ‡è²éŸ³åŒæ­¥é–‹å§‹ã€‚

#### åœ¨input.mp4è¦–é »é–‹å§‹å‰é¡¯ç¤ºå°é¢cover.jpgï¼š
```bash
ffmpeg -loop 1 -t 3 -i cover.jpg -i input.mp4 \
-filter_complex "[1:a]adelay=3000|3000[aud]; \
[0:v][1:v]concat=n=2:v=1:a=0[v]" \
-map "[v]" -map "[aud]" -shortest -y output.mp4
```
#### ç‚ºè¦–é »æ–‡ä»¶æ·»åŠ  metadata å°é¢
```bash
ffmpeg -i input.mp4 -i cover.jpg \
-map 0 -map 1 -c copy -disposition:v:1 attached_pic output.mp4
```


### 3ï¸âƒ£ å°†å¤šä¸ªç‰‡æ®µè¿æ¥æˆä¸€ä¸ªï¼ˆåŒç¼–ç ï¼‰
åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼š
```bash
# filelist.txt
file 'part1.mp4'
file 'part2.mp4'
file 'part3.mp4'
```
æ‰§è¡Œï¼š
```bash
ffmpeg -f concat -safe 0 -i filelist.txt -c copy output.mp4
```
> âš  æ‰€æœ‰æ–‡ä»¶å¿…é¡»æ˜¯ç›¸åŒç¼–ç æ ¼å¼ï¼ˆå¦‚ H.264ï¼‰ã€‚

### 3ï¸âƒ£ è‹¥æ ¼å¼ä¸åŒï¼ˆéœ€é‡æ–°ç¼–ç ï¼‰
```bash
ffmpeg -f concat -safe 0 -i filelist.txt -c:v libx264 -c:a aac -b:a 192k output.mp4
```

---

## ğŸ¨ å››ã€ç”»é¢åˆæˆä¸æ‹¼å›¾

### 1ï¸âƒ£ å°†ä¸¤æ®µè§†é¢‘å·¦å³æ‹¼æ¥
```bash
ffmpeg -i left.mp4 -i right.mp4 -filter_complex "hstack" output.mp4
```

ä¸Šä¸‹æ‹¼æ¥ï¼š
```bash
ffmpeg -i top.mp4 -i bottom.mp4 -filter_complex "vstack" output.mp4
```

### 2ï¸âƒ£ Picture-in-Pictureï¼ˆå°ç”»é¢å åŠ ï¼‰
```bash
ffmpeg -i background.mp4 -i overlay.mp4 -filter_complex "overlay=10:10" output.mp4
```
> å°†ç¬¬äºŒä¸ªè§†é¢‘å åŠ åœ¨ä¸»ç”»é¢å·¦ä¸Šè§’ï¼ˆè·å·¦10pxï¼Œä¸Š10pxï¼‰

---

## ğŸ”Š äº”ã€éŸ³é¢‘å¤„ç†

### 1ï¸âƒ£ æå–éŸ³é¢‘
```bash
ffmpeg -i input.mp4 -q:a 0 -map a audio.mp3
```

### 2ï¸âƒ£ å°†éŸ³é¢‘åˆå…¥è§†é¢‘
```bash
ffmpeg -i video.mp4 -i audio.mp3 -c:v copy -c:a aac -shortest output.mp4
```

---

## ğŸï¸ å…­ã€å›¾ç‰‡åˆæˆä¸ºè§†é¢‘

### 1ï¸âƒ£ ç”±è¿ç»­å›¾ç‰‡ç”Ÿæˆè§†é¢‘ï¼ˆ30fpsï¼‰
```bash
ffmpeg -framerate 30 -i frames/frame_%04d.png -c:v libx264 -pix_fmt yuv420p output.mp4
```

### 2ï¸âƒ£ æŒ‡å®šåˆ†è¾¨ç‡
```bash
ffmpeg -framerate 30 -i frames/frame_%04d.png -s 1920x1080 -c:v libx264 output.mp4
```

---

## âš¡ ä¸ƒã€è°ƒæ•´è§†é¢‘å±æ€§

### 1ï¸âƒ£ æ”¹å˜åˆ†è¾¨ç‡
```bash
ffmpeg -i input.mp4 -vf scale=1280:720 output.mp4
```

### 2ï¸âƒ£ è°ƒæ•´æ’­æ”¾é€Ÿåº¦
åŠ å¿« 2 å€ï¼š
```bash
ffmpeg -i input.mp4 -filter:v "setpts=0.5*PTS" output.mp4
```
æ”¾æ…¢ 2 å€ï¼š
```bash
ffmpeg -i input.mp4 -filter:v "setpts=2.0*PTS" output.mp4
```

### 3ï¸âƒ£ å»å£°éŸ³æˆ–åªè¦å£°éŸ³
å»æ‰éŸ³è½¨ï¼š
```bash
ffmpeg -i input.mp4 -an output.mp4
```
åªä¿ç•™éŸ³è½¨ï¼š
```bash
ffmpeg -i input.mp4 -vn output.mp3
```

---

## ğŸ’¾ å…«ã€å®ç”¨å»ºè®®
| éœ€æ±‚ | å‘½ä»¤ç‰¹æ€§ |
|------|-----------|
| å‰ªè¾‘ / æå–ç‰‡æ®µ | `-ss` + `-to` + `-c copy` |
| å›¾ç‰‡ â†’ è§†é¢‘ | `-framerate` + `-i frame_%04d.png` |
| æ‹¼æ¥ç‰‡æ®µ | `concat` æ¨¡å¼ |
| å åŠ è§†é¢‘ / å›¾ç‰‡ | `overlay` |
| æ— æŸå¿«é€Ÿå¤„ç† | `-c copy` |
| AI å‡çº§åé‡å»ºè§†é¢‘ | `ffmpeg -framerate ... -i upscale/frame_%06d.png -c:v libx264 output.mp4` |

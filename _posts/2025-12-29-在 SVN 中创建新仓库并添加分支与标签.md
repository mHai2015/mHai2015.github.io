
---
layout: post
title:  "åœ¨ SVN ä¸­åˆ›å»ºæ–°ä»“åº“å¹¶æ·»åŠ åˆ†æ”¯ä¸æ ‡ç­¾"
date:   2025-12-29 18:20:56 +0800
categories: [SVN]
---

ğŸŒŸ å®Œæ•´æ“ä½œæµç¨‹

ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–°ä»“åº“å¹¶åˆå§‹åŒ–æ ‡å‡†ç»“æ„
~~~bash
# åˆ›å»ºä»“åº“ç›®å½•
sudo mkdir -p /var/www/svn/new_project
sudo svnadmin create /var/www/svn/new_project

# è®¾ç½®æƒé™
sudo chown -R www-data:www-data /var/www/svn/new_project
sudo chmod -R 775 /var/www/svn/new_project

# åˆå§‹åŒ–æ ‡å‡†ç›®å½•ç»“æ„
svn mkdir -m "åˆ›å»ºæ ‡å‡†ç»“æ„" \
http://your-svn-server/svn/new_project/trunk \
http://your-svn-server/svn/new_project/branches \
http://your-svn-server/svn/new_project/tags
~~~
ç¬¬äºŒæ­¥ï¼šæ·»åŠ åˆå§‹ä»£ç åˆ°ä¸»å¹²(trunk)
~~~bash
# 1. æ£€å‡ºä¸»å¹²
svn checkout http://your-svn-server/svn/new_project/trunk new_project
cd new_project

# 2. æ·»åŠ é¡¹ç›®æ–‡ä»¶
mkdir src docs config
echo "print('Hello SVN!')" > src/main.py
echo "# Project Documentation" > docs/README.md
echo "DATABASE_URL=sqlite:///db.sqlite3" > config/.env

# 3. æäº¤åˆå§‹ä»£ç 
svn add src docs config
svn commit -m "åˆå§‹é¡¹ç›®æäº¤ï¼šæ·»åŠ æ ¸å¿ƒæ–‡ä»¶"
~~~
ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå¼€å‘åˆ†æ”¯
~~~bash
# ä»ä¸»å¹²åˆ›å»ºç‰¹æ€§åˆ†æ”¯
svn copy -m "åˆ›å»ºå¼€å‘åˆ†æ”¯" \
http://your-svn-server/svn/new_project/trunk \
http://your-svn-server/svn/new_project/branches/develop
~~~
ç¬¬å››æ­¥ï¼šåˆ›å»ºæ ‡ç­¾ï¼ˆå‘å¸ƒç‰ˆæœ¬ï¼‰
~~~bash
# åˆ›å»ºç¬¬ä¸€ä¸ªå‘å¸ƒæ ‡ç­¾ (v1.0.0)
svn copy -m "å‘å¸ƒç‰ˆæœ¬ v1.0.0" \
http://your-svn-server/svn/new_project/trunk \
http://your-svn-server/svn/new_project/tags/v1.0.0
~~~
ç¬¬äº”æ­¥ï¼šåœ¨åˆ†æ”¯ä¸Šå¼€å‘å¹¶åˆå¹¶å›ä¸»å¹²
~~~bash
# 1. åˆ‡æ¢åˆ°å¼€å‘åˆ†æ”¯
svn switch http://your-svn-server/svn/new_project/branches/develop

# 2. è¿›è¡Œå¼€å‘å·¥ä½œ
echo "def new_feature():" >> src/main.py
echo "    print('Added in develop branch')" >> src/main.py

# 3. æäº¤åˆ†æ”¯æ›´æ”¹
svn commit -m "åœ¨developåˆ†æ”¯æ·»åŠ æ–°åŠŸèƒ½"

# 4. åˆ‡æ¢å›ä¸»å¹²
svn switch http://your-svn-server/svn/new_project/trunk

# 5. åˆå¹¶åˆ†æ”¯åˆ°ä¸»å¹²
svn merge http://your-svn-server/svn/new_project/branches/develop
svn commit -m "å°†developåˆ†æ”¯åˆå¹¶åˆ°ä¸»å¹²"
~~~
ç¬¬å…­æ­¥ï¼šåˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯ï¼ˆç´§æ€¥ä¿®å¤ï¼‰
~~~bash
# 1. ä»æ ‡ç­¾åˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯
svn copy -m "åˆ›å»ºçƒ­ä¿®å¤åˆ†æ”¯" \
http://your-svn-server/svn/new_project/tags/v1.0.0 \
http://your-svn-server/svn/new_project/branches/hotfix-issue-123

# 2. åˆ‡æ¢åˆ°çƒ­ä¿®å¤åˆ†æ”¯
svn switch http://your-svn-server/svn/new_project/branches/hotfix-issue-123

# 3. è¿›è¡Œä¿®å¤
echo "# ç´§æ€¥ä¿®å¤è¡¥ä¸" >> src/patch.py
svn add src/patch.py
svn commit -m "ä¿®å¤é—®é¢˜ #123"

# 4. åˆ›å»ºæ–°æ ‡ç­¾ (v1.0.1)
svn copy -m "å‘å¸ƒä¿®å¤ç‰ˆæœ¬ v1.0.1" \
http://your-svn-server/svn/new_project/branches/hotfix-issue-123 \
http://your-svn-server/svn/new_project/tags/v1.0.1
~~~
ğŸ“Š SVN åˆ†æ”¯/æ ‡ç­¾ç®¡ç†æœ€ä½³å®è·µ

|ç±»å‹|å‘½åè§„èŒƒ|ç”¨é€”|ç”Ÿå‘½å‘¨æœŸ|
|  ----  | ----  | ----  | ----  |
|ä¸»å¹²(trunk)|/trunk|ä¸»è¦å¼€å‘çº¿|æ°¸ä¹…å­˜åœ¨|
|å¼€å‘åˆ†æ”¯|/branches/feature-*|æ–°åŠŸèƒ½å¼€å‘|åŠŸèƒ½å®Œæˆååˆ é™¤|
|å‘å¸ƒåˆ†æ”¯|/branches/release-*|ç‰ˆæœ¬æµ‹è¯•å‡†å¤‡|å‘å¸ƒååˆ é™¤|
|çƒ­ä¿®å¤åˆ†æ”¯|/branches/hotfix-*|ç”Ÿäº§ç¯å¢ƒä¿®å¤|ä¿®å¤ååˆ é™¤|
|ç‰ˆæœ¬æ ‡ç­¾|/tags/v*.*.*|ç¨³å®šç‰ˆæœ¬å¿«ç…§|æ°¸ä¹…ä¿ç•™|


ğŸ” éªŒè¯ä»“åº“ç»“æ„
~~~bash
# æŸ¥çœ‹ä»“åº“å®Œæ•´ç»“æ„
svn ls -R http://your-svn-server/svn/new_project

# é¢„æœŸè¾“å‡ºï¼š
branches/
branches/develop/
branches/hotfix-issue-123/
tags/
tags/v1.0.0/
tags/v1.0.0/src/
tags/v1.0.0/src/main.py
tags/v1.0.0/docs/
tags/v1.0.0/docs/README.md
tags/v1.0.0/config/
tags/v1.0.0/config/.env
tags/v1.0.1/
tags/v1.0.1/src/
tags/v1.0.1/src/main.py
tags/v1.0.1/src/patch.py
tags/v1.0.1/docs/
tags/v1.0.1/docs/README.md
tags/v1.0.1/config/
tags/v1.0.1/config/.env
trunk/
trunk/src/
trunk/src/main.py
trunk/docs/
trunk/docs/README.md
trunk/config/
trunk/config/.env
~~~
ğŸ’¡ é«˜çº§åˆ†æ”¯ç®¡ç†æŠ€å·§
1. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
~~~bash
svn copy -m "åˆ›å»ºç™»å½•åŠŸèƒ½åˆ†æ”¯" \
http://your-svn-server/svn/new_project/trunk \
http://your-svn-server/svn/new_project/branches/feature-login
~~~
2. åˆå¹¶ç‰¹å®šä¿®è®¢
~~~bash
# åªåˆå¹¶ä¿®è®¢ç‰ˆ100-105çš„æ›´æ”¹
svn merge -r 100:105 \
http://your-svn-server/svn/new_project/branches/feature-login
~~~
3. åˆ†æ”¯é‡å‘½å
~~~bash
svn move -m "é‡å‘½ååˆ†æ”¯" \
http://your-svn-server/svn/new_project/branches/old-name \
http://your-svn-server/svn/new_project/branches/new-name
~~~
4. æŸ¥çœ‹åˆ†æ”¯å·®å¼‚
~~~bash
svn diff \
http://your-svn-server/svn/new_project/trunk \
http://your-svn-server/svn/new_project/branches/feature-login
~~~
âš™ï¸ è‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹
åˆ›å»ºåˆå§‹åŒ–è„šæœ¬ init_svn_project.sh:
~~~bash
#!/bin/bash

PROJECT_NAME=$1
SVN_ROOT="http://your-svn-server/svn"

# åˆ›å»ºä»“åº“
svnadmin create /var/www/svn/$PROJECT_NAME
chown -R www-data:www-data /var/www/svn/$PROJECT_NAME

# åˆå§‹åŒ–ç»“æ„
svn mkdir -m "åˆå§‹åŒ–ç»“æ„" \
$SVN_ROOT/$PROJECT_NAME/trunk \
$SVN_ROOT/$PROJECT_NAME/branches \
$SVN_ROOT/$PROJECT_NAME/tags

# æ£€å‡ºä¸»å¹²
svn checkout $SVN_ROOT/$PROJECT_NAME/trunk ${PROJECT_NAME}_trunk

# æ·»åŠ åŸºç¡€æ–‡ä»¶
cd ${PROJECT_NAME}_trunk
mkdir src docs
echo "# $PROJECT_NAME" > docs/README.md
svn add src docs
svn commit -m "åˆå§‹æäº¤"

# åˆ›å»ºå¼€å‘åˆ†æ”¯
svn copy -m "åˆ›å»ºå¼€å‘åˆ†æ”¯" \
$SVN_ROOT/$PROJECT_NAME/trunk \
$SVN_ROOT/$PROJECT_NAME/branches/develop

echo "é¡¹ç›® $PROJECT_NAME åˆå§‹åŒ–å®Œæˆ!"
echo "ä¸»å¹²è·¯å¾„: $SVN_ROOT/$PROJECT_NAME/trunk"
echo "å¼€å‘åˆ†æ”¯: $SVN_ROOT/$PROJECT_NAME/branches/develop"
~~~
ä½¿ç”¨æ–¹å¼ï¼š
~~~bash
chmod +x init_svn_project.sh
./init_svn_project.sh my_new_project
~~~
ğŸ“Œ å…³é”®æ³¨æ„äº‹é¡¹
1.æƒé™ç®¡ç†ï¼šç¡®ä¿åœ¨ /etc/subversion/authz ä¸­é…ç½®å¥½åˆ†æ”¯/æ ‡ç­¾æƒé™
2.åˆå¹¶ç­–ç•¥ï¼šå®šæœŸå°†ä¸»å¹²å˜æ›´åˆå¹¶åˆ°é•¿æœŸåˆ†æ”¯
3.æ ‡ç­¾ä¸å¯å˜ï¼šåˆ›å»ºæ ‡ç­¾åä¸è¦ä¿®æ”¹ï¼Œéœ€è¦ä¿®æ”¹æ—¶åˆ›å»ºæ–°æ ‡ç­¾
4.åˆ†æ”¯æ¸…ç†ï¼šå®šæœŸåˆ é™¤å·²åˆå¹¶çš„æ—§åˆ†æ”¯
5.å¤‡ä»½ç­–ç•¥ï¼šå®šæœŸå¤‡ä»½ä»“åº“
~~~bash
svnadmin dump /var/www/svn/new_project > new_project_backup.svndump
~~~


ä¾†æºï¼šhttps://www.xiaokw.cn/archives/svn-fen-zhi-yu-biao-qian